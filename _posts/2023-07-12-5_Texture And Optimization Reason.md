---
layout: single
title:  "[유니티 그래픽스 최적화 스타트업 정리] 텍스처, 텍스처 최적화를 해야 하는 이유"
author_profile: false
tag : [유니티 최적화]
categories : 유니티 최적화
typora-root-url: ../
---

> ## 개요

이 글은 "[유니티 그래픽스 최적화 스타트업](https://product.kyobobook.co.kr/detail/S000001888125)"이라는 책을 보고 정리한 글입니다.

텍스처는 게임의 퀄리티에 있어 필수적인 요소입니다. 그 이유는 텍스처로 아래 사진처럼 캐릭터의 질감 및 컬러를 표현하여 게임의 퀄리티를 높일 수 있기 때문입니다. 오늘은 이러한 텍스처와 텍스처 최적화의 이유에 대해서 알아보고 정리해봤습니다.

![image-20230712103150861](/images/2023-07-12-fifth/image-20230712103150861.png)



> ## bpp(Bit Per Pixel)

텍스처에 대해 알아보기 전에 먼저 모니터의 픽셀들이 색을 표현하기 위해 가지고 있는 비트에 대해 알아야합니다. 모니터로 보이는 컴퓨터 그래픽은 빛의 삼원색 즉, R,G,B로 이루어져 있습니다. 일반적으로 각 채널 당 8비트로 이루어져 있고, 한 픽셀은 세 채널이 합쳐진 24비트로 구성됩니다. 24비트는 16,777,216 가지의 컬러를 표현할 수 있으며 이를 트루컬러(True Color)라고 부릅니다.

최근에는 채널 당 10비트를 지원하는 30비트 모니터도 보급화 되고 있지만 아직까지는 24비트 모니터 및 프로그램이 대중적입니다. 즉 대부분의 게임은 24비트 모니터를 타겟으로 잡고 개발합니다.

흔히 사용하는 이미지도 마찬가지입니다. 채널 당 8비트로 구성되어 있으며, 만약 알파 채널이 없는 경우 24비트(RGB), 알파 채널이 있는 경우 32비트(RGBA)로 만들어집니다. 그리고 한 픽셀이 24비트로 구성된 이미지는 24bpp(bit per pixel, 픽셀 당 24비트) 이미지라고도 부를 수 있습니다.



> ## 텍스처(Texture)란?

텍스처는 물체의 표면에 세부적인 질감 및 컬러를 표현하는데 사용되는 그래픽 에셋 중 하나입니다. 텍스처는 오브젝트를 렌더링할 때 텍스처 매핑(Texture Mapping)을 통해서 사용됩니다. 텍스처 매핑은 컴퓨터 그래픽스 분야에서 가상의 3차원 물체의 표면에 세부적인 질감을 묘사하거나 컬러를 입히는 기법입니다. 텍스처 매핑 작업은 주로 프래그먼트 쉐이더 단계에서 이루어지며, 오브젝트의 각 픽셀에 대응하는 텍스처의 값을 샘플링해서 최종 컬러에 반영시킵니다.



> ## 텍스처를 왜 최적화 해야 할까?

텍스처를 최적화 해야 하는 이유는 간단하게 설명하면 텍스처가 병목의 원인이 될 수 있기 때문입니다. 텍스처의 병목은 주로 메모리 대역폭(Memory Bandwidth)에 의해 좌우되며, 텍스처 사이즈가 커지면 대역폭 문제가 발생합니다. 그 외에도 메모리 이슈나 패키지 용량 이슈 같은 문제가 발생할 수 있습니다.

<br>

##### 대역폭

대역폭이란 메모리에서 데이터를 가져올 때 한 번에 가져올 수 있는 크기를 말하며, 대역폭 사이즈는 한정되어 있기 때문에 이 사이즈보다 텍스처의 크기가 큰 경우 병목이 발생하게 되고 성능에 악영향을 미치게 됩니다. 특히 모바일 디바이스의 경우 대역폭이 상당히 작게 만들어져 있으며, 텍스처가 대역폭을 많이 차지할수록 발열이 심해지기 때문에 대역폭이 큰 이슈가 될 수 있습니다. 또한 GPU가 GPU 메모리로부터 텍스처를 읽어들일 때 속도의 한계가 있습니다. 만일 이 한계를 넘는 크기의 데이터를 사용하면 성능에 영향을 주기 때문에 병목 지점이 될 수 있습니다. 그렇기 때문에 텍스처의 사이즈를 신경 써서 개발에 임해야 합니다.

<br>

##### 메모리 이슈

텍스처 데이터 사이즈는 비단 대역폭만의 문제가 아닙니다. 그 이유는 최근 게임들 중 상당수가 물리 기반 렌더링을 채용하기 시작하면서 하나의 오브젝트에 사용되는 텍스처의 양도 늘어나고 있기 때문입니다.

실제 3D 게임을 개발하면서 메모리를 많이 차지하는 요소 중 하나가 바로 텍스처입니다. 복잡한 씬을 렌더링하느라 데이터 사이즈가 큰 텍스처들을 한꺼번에 많이 올려두게 되면 메모리 용량 문제가 발생할 수 있는데 이는 특히 모바일 기기에서 더 문제가 부각될 수 있습니다. 그 이유는 모바일 기기의 메모리는 데스크톱에 비해서 매우 적기 때문입니다. 게다가 하나의 메모리를 CPU와 GPU 가 공유해서 사용하고 있으며, OS가 기본 할당하는 메모리도 있는 등 실제 앱에서 사용 가능한 메모리는 훨씬 적기 때문에 최악의 경우 뜻하지 않게 강제 종료될 수도 있습니다.



##### 패키지 용량 이슈

모바일 게임은 매우 적은 패키지 용량이여야 합니다. 그 이유는 디바이스의 허용량 이슈도 있겠지만 아무래도 용량이 크면 다운로드에 대한 사용자들의 부담이 제일 커지기 때문입니다. 이러한 이유로 구글플레이에서는 100메가바이트가 넘는 앱은 무선 네트워크로 다운로드가 불가능하고 WiFi로만 다운로드가 가능하도록 되어 있습니다. 이를 피하고자 많은 게임이 패치 시스템을 이용하여 데이터들을 다운로드하여 업데이트를 합니다.

하지만 이 역시도 데이터가 커서 다운로드가 오래 걸린다면 유저가 이탈할 확률이 커질 수 있습니다. 그렇기 때문에 게임의 데이터 용량은 중요한 이슈 중 하나인데 텍스처가 게임 용량의 많은 부분을 차지하는 만큼 텍스처 데이터 사이즈를 항상 생각하며 설정 해야 합니다.

<br>

이러한 이유들로 텍스처 최적화는 게임의 성능을 절약할 수 있는 중요한 요소가 되므로 텍스처 최적화 작업은 게임의 최적화를 위해 진행해야 할 필수 사항이라고 말할 수 있습니다.
