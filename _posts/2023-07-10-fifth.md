---
layout: single
title:  "[유니티 그래픽스 최적화 스타트업 정리] 포워드 렌더링과 디퍼드 렌더링"
author_profile: false
tag : [컴퓨터그래픽스]
categories : 컴퓨터그래픽스
typora-root-url: ../
---

> ## 개요

이 글은 "[유니티 그래픽스 최적화 스타트업](https://product.kyobobook.co.kr/detail/S000001888125)"이라는 책을 보고 정리한 글입니다.

유니티에서 기본적으로 지원하는 렌더링 방식으로는 포워드 렌더링과 디퍼드 렌더링 방식이 있습니다.  그렇다면 포워드 렌더링과 디퍼드 렌더링은 무엇일까요? 오늘은 포워드 렌더링과 디퍼드 렌더링에 관해 조사해 정리했습니다.



> ## 포워드 렌더링(Forward Rendering)이란?

전통적인 오브젝트 렌더링 기법입니다. 모바일 기기에서 주로 사용하는 렌더링 기법이며 기본적으로 멀티 렌더 타겟이 필요 없고, 오브젝트 및 동적 라이트가 적으면 성능 부하도 그만큼 적습니다. 하지만 동적 라이트가 많아지면 GPU 연산 부담이 기하급수적으로 늘어납니다. 뿐만 아니라 드로우콜에도 영향을 미칩니다. 그 이유는 오브젝트에 영향을 주는 리얼타임 라이트를 처리하려면 라이트 개수만큼 드로우콜이 필요하기 때문입니다. 이러한 이유로 동적 라이트가 많아지면 CPU와 GPU 연산량이 늘어나 병목의 원인이 될 수 있습니다.



> ## 디퍼드 렌더링(Deferred Rendering)이란?

많은 수의 실시간 라이팅 연산을 비교적으로 좋게 처리할 수 있는 렌더링 기법입니다. 실시간 라이팅을 많이 쓰는 게임에 적합한 방식이기 때문에 많은 PC 및 콘솔 게임에서 널리 쓰이는 렌더링 기법입니다.

디퍼드 렌더링은 멀티 렌더 타겟을 이용해서 여러 개의 버퍼에 불투명한 오브젝트들의 정보를 렌더링합니다. 이 버퍼들을 지오메트리 버퍼 혹은 G 버퍼라고 부릅니다.  모든 오브젝트를 G 버퍼에 렌더링한 후 이 정보들을 토대로 라이팅을 처리하고 최종적으로 프레임 버퍼에 출력해서 씬의 렌더링을 완성합니다.

디퍼드 렌더링은 G버퍼를 가지고 라이팅을 처리하기 때문에 라이팅 연산 등의 비싼 쉐이딩 연산들이 화면에 보이는 픽셀만 처리하기 때문에 불필요한 쉐이딩 연산을 절약할 수 있습니다. 그리고 G버퍼에 오브젝트들을 렌더링하는 지오메트리 패스와 라이팅을 처리하는 라이팅 패스가 분리되어 있습니다.

![image-20230710184852193](/images/2023-07-10-five/image-20230710184852193.png)

하지만 디퍼드 렌더링 기법은 모바일 환경에서는 현실적으로 사용하기 어렵습니다. 그 이유는 G 버퍼를 생성하고 사용하기 위해 멀티 렌더 타겟을 지원해야 하며, 기본적인 메모리 대역폭이 뒷받침 되어야 합니다. 그래서 모바일 게임에서는 디퍼드 렌더링이 권장되지 않습니다.
